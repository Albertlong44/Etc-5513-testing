# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map= world_map, color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  + # Change the color scale to red and white
theme(legend.position = "bottom") +theme_classic()
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map= Graphic_1, color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  + # Change the color scale to red and white
theme(legend.position = "bottom") +theme_classic()
World_map<- map_data("world") %>% arrange(region)
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  + # Change the color scale to red and white
theme(legend.position = "bottom") +theme_classic()
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  + # Change the color scale to red and white
theme(legend.position = "bottom") +theme_light()
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  + # Change the color scale to red and white
theme(legend.position = "bottom") +theme_nothing()
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  + # Change the color scale to red and white
theme(legend.position = "bottom") +theme_void()
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  + title(main= The median distribution for G20 country)+
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  + title(main= "The median age distribution for G20 country")+
# Change the color scale to red and white
theme(legend.position = "bottom") +theme_void()
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  #+ title(main= "The median age distribution for G20 country")+
# Change the color scale to red and white
+theme(legend.position = "bottom") +theme_void()
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray") +theme(legend.position = "bottom") +theme_void()  #+ title(main= "The median age distribution for G20 country")+
# Change the color scale to red and white
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray") +theme(legend.position = "bottom") +theme_void()+ title(main= "The median age distribution for G20 country")
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray") +theme(legend.position = "bottom") +theme_void()+ ggtitle(main= "The median age distribution for G20 country")
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray") +theme(legend.position = "bottom") +theme_classic()+ ggtitle(main= "The median age distribution for G20 country")
ggplot(Graphic_1 , aes(x= long, y= lat, map_id = region)) +
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray") +theme(legend.position = "bottom") +theme_void()+ ggtitle(main= "The median age distribution for G20 country")
ggplot(Graphic_1 , aes( map_id = region)) +expand_limits(x= long, y= lat)+
# draw the grid
# expand_limits(x =long, y = lat) +
# draw a us map, fill = MobileHomes means color the map according to MobileHomes property
geom_map(aes(fill = median_age), map=World_map , color="black")
ggplot(Graphic_1 , aes( map_id = region)) +expand_limits(x= long, y= lat)+
geom_map(aes(fill = median_age), map=World_map , color="black")
ggplot(Graphic_1, aes( map_id = region)) +expand_limits(x= Graphic_1$long, y= Graphic_1$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black")
scale_fill_gradient(low = "green", high = "red", na.value = "gray") +theme(legend.position = "bottom") +theme_void()+ ggtitle(main= "The median age distribution for G20 country")
ggplot(Graphic_1, aes( map_id = region)) +expand_limits(x= Graphic_1$long, y= Graphic_1$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray") +theme(legend.position = "bottom") +theme_void()+ ggtitle(main= "The median age distribution for G20 country")
ggplot(Graphic_1, aes( map_id = region)) +expand_limits(x= Graphic_1$long, y= Graphic_1$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray") +theme(legend.position = "bottom") +theme_void()
#+ ggtitle(main= "The median age distribution for G20 country")
#+
# Change the color scale to red and white
ggplot(Graphic_1, aes( map_id = region)) +expand_limits(x= Graphic_1$long, y= Graphic_1$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray") +theme(legend.position = "bottom") +theme_void() +labs(title = ""The median age distribution for G20 country")
ggplot(Graphic_1, aes( map_id = region)) +expand_limits(x= Graphic_1$long, y= Graphic_1$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray") +theme(legend.position = "bottom") +theme_void() +labs(title = "The median age distribution for G20 country")
#+ ggtitle(main= "The median age distribution for G20 country")
#+
# Change the color scale to red and white
?labs
Population_research_1 <- aggregate(median_age~Entity, FUN  = mean,data= Population_research) %>% filter(Entity %in% G20) %>%
rename(region=Entity) %>% mutate(
region=recode(region, "United Kingdom"="UK","United States"="USA"))
Population_research_1
Graphic_1<- left_join(World_map,Population_research_1, by="region")
Graphic_1
Graphic_1<- left_join(World_map,Population_research_1, by="region")
Graphic_1 %>% filter(region=="UK")
ggplot(Graphic_1, aes( map_id = region)) +expand_limits(x= Graphic_1$long, y= Graphic_1$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray") +theme(legend.position = "bottom") +theme_void() +labs(title = "The median age distribution for G20 country")
# Change the color scale to red and white
ggplot(Graphic_1, aes( map_id = region)) +expand_limits(x= Graphic_1$long, y= Graphic_1$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray") +theme(legend.position = "bottom") +theme_void() +labs(title = "The median age distribution for G20 country")
ggplot(Graphic_1, aes( map_id = region)) +expand_limits(x= Graphic_1$long, y= Graphic_1$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +labs(title = "The median age distribution for G20 country")
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population research2<- Population_research %>% filter(year<=2021 & year>=2012 & Entity %in% continent)
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter(year<=2021 & year>=2012 & Entity %in% continent)
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter(year<= "2021" & year>=2012, Entity %in% continent)
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter(year<= 2021 & year>=2012, Entity %in% continent)
Population_research <- left_join(median_age_tidy, life_expectacy_tidy, by="matcher") %>% select(Entity, Year, median_age, life_expectacy)
Population_research
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter(Year<= 2021 & Year>=2012, Entity %in% continent)
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter(Year<= 2021 & Year>=2012, Entity %in% continent)
population_research2
population_research2 %>% ggplot( aes(y= median_age, x= life_expectacy), color= Entity) +geom_point()+geom_line()
population_research2 %>% ggplot( aes(y= median_age, x= life_expectacy), color= Entity) +geom_line()
population_research2 %>% ggplot( aes(y= median_age, x= life_expectacy), color= Entity) +geom_line()
population_research2 %>% ggplot( aes(y= median_age, x= life_expectacy, color= Entity)) +geom_line()
population_research2 %>% ggplot( aes(y= median_age, x= life_expectacy, color= Entity, linetype=as.factor(Year)) +geom_line()
population_research2 %>% ggplot( aes(y= median_age, x= life_expectacy, color= Entity, linetype=as.factor(Year))) +geom_line()
population_research2 %>% ggplot( aes(y= median_age, x= life_expectacy, color= Entity, linetype=as.factor(Year))) +geom_spot()
population_research2 %>% ggplot( aes(y= median_age, x= life_expectacy, color= Entity, linetype=as.factor(Year))) +geom_point()
population_research2 %>% ggplot( aes(y= median_age, x= life_expectacy, color= Entity, linetype=as.factor(Year))) +geom_point()
population_research2 %>% ggplot( aes(y= life_expectacy, x= year, color= Entity)) +geom_point()
population_research2 %>% ggplot( aes(y= life_expectacy, x= Year, color= Entity)) +geom_point()
population_research2 %>% ggplot( aes(y= life_expectacy, x= Year, color= Entity)) +geom_line()
population_research2 %>% ggplot( aes(y= life_expectacy, x= Year, color= Entity)) +geom_line()+geom_point()
population_research2 %>% ggplot( aes(y= life_expectacy, x= Year, color= Entity)) +geom_line()+geom_point(color= "Black")
population_research2 %>% ggplot( aes(y= life_expectacy~median_age, x= Year, color= Entity)) +geom_line()+geom_point(color= "Black")
population_research2 %>% ggplot( aes(y= life_expectacy, x= Year, color= Entity)) +geom_line()+geom_point(color= "Black")
population_research2 %>% ggplot( aes(y= life_expectacy, x= Year, color= Entity)) +geom_line()+geom_point(color= "Black")
?ggplot
?linetype
population_research2 %>% ggplot( aes(y= life_expectacy, x= Year, color= Entity)) +geom_line()+geom_point(color= "Black", shape="5")
population_research2 %>% ggplot( aes(y= life_expectacy, x= Year, color= Entity)) +geom_line()+geom_point(color= "Black", shape=5)
population_research2 %>% ggplot( aes(y= life_expectacy, x= Year, color= Entity)) +geom_line()+geom_point(color= "Black", shape=6)
population_research2 %>% ggplot( aes(y= life_expectacy, x= Year, color= Entity)) +geom_line()+geom_point(color= "Black", shape=7)
population_research2 %>% ggplot( aes(y= life_expectacy, x= Year, color= Entity)) +geom_line()+geom_point(color= "Black", shape=4)
population_research2 %>% ggplot( aes(y= life_expectacy, x= Year, color= Entity)) +geom_line()+geom_point(color= "Black", shape=1)
population_research2 %>% ggplot( aes(y= life_expectacy, x= median_age, color= Entity~Year)) +geom_line()+geom_point(color= "Black")
population_research2 %>% ggplot( aes(y= life_expectacy, x= median_age, color= Entity)) +geom_line()+geom_point(color= "Black")
population_research2 %>% ggplot( aes(y= life_expectacy, x= median_age, color= Entity)) +geom_line()
head(iris)
head(iris) %>% ggplot(aes(x=Sepal.Length, Y= Sepal.Width, color=Species)) +geom_line()
iris%>% ggplot(aes(x=Sepal.Length, y= Sepal.Width, color=Species)) +geom_line()
?cor()
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter(Year<= 2021 & Year>=2012, Entity %in% continent)
population_research2 %>% cor(median_age,life_expectacy)
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter(Year<= 2021 & Year>=2012, Entity %in% continent)
population_research2 %>% cor(median_age,life_expectacy, na.rm=TRUE)
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter(Year<= 2021 & Year>=2012, Entity %in% continent)
population_research2 %>% cor(median_age,life_expectacy)
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter(Year<= 2021 & Year>=2012, Entity %in% continent)
population_research2 %>% cov(median_age,life_expectacy)
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter(Year<= 2021 & Year>=2012, Entity %in% continent)
cor(population_research2$median_age,population_research2$life_expectacy)
population_research2 %>% ggplot(aes(x= Year, Y=life_expectacy)) +geom_violin()
population_research2 %>% ggplot(aes(x= Year, y=life_expectacy)) +geom_violin()
population_research2 %>% ggplot(aes(x= Year, y=life_expectacy,fill=Entity) +geom_violin()
population_research2 %>% ggplot(aes(x= Year, y=life_expectacy,fill=Entity)) +geom_violin()
population_research2 %>% ggplot(aes(x= Year, y=life_expectacy)) +geom_violin(aes(fill=Year))
population_research2 %>% ggplot(aes(x= Year, y=life_expectacy,fill=Entity)) +geom_violin(aes(fill=Year))
population_research2 %>% ggplot(aes(x= Year, y=life_expectacy)) +geom_violin(aes(fill=Year,Entity))
population_research2 %>% ggplot(aes(x= Year, y=life_expectacy)) +geom_violin(aes(fill=Entity))
ggplot(Graphic_1, aes( map_id = region)) +expand_limits(x= Graphic_1$long, y= Graphic_1$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +theme(legend.position="bottom")+labs(title = "The median age distribution for G20 country")
population_research2 %>% ggplot(aes(x= Year, y=life_expectacy)) +geom_violin(aes(fill=Entity))+geom_jitter()
population_research2 %>% geom_point(aes(x= Entity, y= life_expectacy))+geom_violin()
population_research2 %>% ggplot(aes(x= Entity, y= life_expectacy))+geom_violin()
population_research2 %>% ggplot(aes(x= Entity, y= life_expectacy))+geom_violin()+scale_y_log10()
population_research2 %>% ggplot(aes(x= Entity, y= life_expectacy))+geom_violin(aes(fill=Entity))+scale_y_log10()
population_research2 %>% ggplot(aes(x= Entity, y= life_expectacy))+geom_violin(aes(fill=Entity))+  scale_y_continuous(limits = c(70, 90), expand = c(0.05, 0.5))
population_research2 %>% ggplot(aes(x= Entity, y= life_expectacy))+geom_violin(aes(fill=Entity))
population_research2 %>% ggplot(aes(x= Entity, y= life_expectacy))+geom_violin(aes(fill=Entity))+  scale_y_continuous(limits = c(60, 80), expand = c(0.05, 0.5))
map_data("World Hires")
library(tidyverse)
library(knitr)
library(maps)
map_data("World Hires")
library(tidyverse)
library(knitr)
library(maps)
library(mapdata)
install.packages("mapdata"0
install.packages("mapdata")
library(tidyverse)
library(knitr)
library(maps)
library(mapdata)
map_data("World Hires")
map_data("WorldHires")
map_data("worldHires")
map_data("worldHires") %>% filter(region == "Africa")
map_data("worldHires") %>% filter(region == "USA")
ids <- factor(c("1.1", "2.1", "1.2", "2.2", "1.3", "2.3"))
values <- data.frame(
id = ids,
value = c(3, 3.1, 3.1, 3.2, 3.15, 3.5)
)
positions <- data.frame(
id = rep(ids, each = 4),
x = c(2, 1, 1.1, 2.2, 1, 0, 0.3, 1.1, 2.2, 1.1, 1.2, 2.5, 1.1, 0.3,
0.5, 1.2, 2.5, 1.2, 1.3, 2.7, 1.2, 0.5, 0.6, 1.3),
y = c(-0.5, 0, 1, 0.5, 0, 0.5, 1.5, 1, 0.5, 1, 2.1, 1.7, 1, 1.5,
2.2, 2.1, 1.7, 2.1, 3.2, 2.8, 2.1, 2.2, 3.3, 3.2)
)
positions
Value
value
values
ggplot(values)
ggplot(values) +
geom_map(aes(map_id = id), map = positions)
ggplot(values) +
geom_map(aes(map_id = id), map = positions) +
expand_limits(positions)
ggplot(Population_research_1, aes( map_id = region)) +expand_limits(x= World_map$long, y= World_map$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +theme(legend.position="bottom")+labs(title = "The median age distribution for G20 country")
ggplot(Population_research_1, aes( map_id = region)) +expand_limits(x= World_map$long, y= World_map$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +theme(legend.position="bottom")+labs(title = "The median age distribution for G20 country")
df <- data.frame(x = rnorm(100), y = rnorm(100), z = rnorm(100))
# Create a scatter plot with a color gradient based on z
p <- ggplot(df, aes(x, y, fill = z)) + geom_point(shape = 21, size = 5)
p
df
P+cale_fill_gradient(limits = c(-1, 1), breaks = c(-1, 0, 1),
values = c("blue", "gray", "red"))
p+scale_fill_gradient(limits = c(-1, 1), breaks = c(-1, 0, 1),
+                      values = c("blue", "gray", "red"))
p + scale_fill_gradient(limits = c(-1, 1), breaks = c(-1, 0, 1),
values = c("blue", "gray", "red"))
?scale_fill_gradient
p + scale_fill_gradient(limits ==c(-1, 1), breaks == c(-1, 0, 1),
values == c("blue", "gray", "red"))
library(ggplot2)
# Create some example data
df <- data.frame(x = rnorm(100), y = rnorm(100), z = rnorm(100))
# Create a scatter plot with a color gradient based on z
p <- ggplot(df, aes(x, y, fill = z)) + geom_point(shape = 21, size = 5)
# Set the color scale for z with gray for zero
p + scale_fill_gradient(limits = c(-1, 1), breaks = c(-1, 0, 1),
values = c("blue", "gray", "red"))
library(ggplot2)
# Create some example data
df <- data.frame(x = rnorm(100), y = rnorm(100), z = rnorm(100))
# Create a scatter plot with a color gradient based on z
p <- ggplot(df, aes(x, y, fill = z)) + geom_point(shape = 21, size = 5)
# Set the color scale for z with gray for zero
p + scale_fill_gradient2(low = "blue", mid = "gray", high = "red",
midpoint = 0, limits = c(-1, 1))
ggplot(Graphic_1, aes( map_id = region)) +expand_limits(x= World_map$long, y= World_map$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +theme(legend.position="bottom")+labs(title = "The median age distribution for G20 country")
ggplot(Graphic_1, aes( map_id = region)) +expand_limits(x= World_map$long, y= World_map$lat)+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +theme(legend.position="bottom")+labs(title = "The median age distribution for G20 country")
ggplot(Graphic_1, aes( x= long, y= lat, map_id = region))+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +theme(legend.position="bottom")+labs(title = "The median age distribution for G20 country")
?coord_sf
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter(Year<= 2021 & Year>=2012, Entity %in% continent)
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter(Year<= 2021 & Year>=2012, Entity %in% continent)
population_research2
median_age_tidy<-median_age %>% filter(Year<= 2021 & Year>=2012) %>% rename(median_age= "Median.age...Sex..all...Age..all...Variant..estimates") %>% mutate(Entity=(str_remove_all(Entity, " \\(UN\\)")), matcher=paste0(Entity,Code,Year))
life_expectacy_tidy<-life_expectacy  %>%filter(Year<= 2021 & Year>=2012) %>% rename(Entitylife_expectacy = "Life.expectancy.at.birth..historical.") %>% mutate(matcher=paste0(Entity,Code,Year)) %>% select(matcher:life_expectacy)
life_expectacy_tidy<-life_expectacy  %>%filter(Year<= 2021 & Year>=2012) %>% rename(Entitylife_expectacy = "Life.expectancy.at.birth..historical.") %>% mutate(matcher=paste0(Entity,Code,Year)) %>% select(matcher:life_expectacy)
life_expectacy_tidy<-life_expectacy  %>%filter(Year<= 2021 & Year>=2012) %>% rename(Entitylife_expectacy = "Life.expectancy.at.birth..historical.") %>% mutate(matcher=paste0(Entity,Code,Year))
life_expectacy_tidy
median_age_tid
median_age_tidy
life_expectacy_tidy<-life_expectacy  %>%filter(Year<= 2021 & Year>=2012) %>% rename(life_expectacy = "Life.expectancy.at.birth..historical.") %>% mutate(matcher=paste0(Entity,Code,Year)) %>% select(life_expectacy:matcher)
```{r}
life_expectacy_tidy<-life_expectacy  %>%filter(Year<= 2021 & Year>=2012) %>% rename(life_expectacy = "Life.expectancy.at.birth..historical.") %>% mutate(matcher=paste0(Entity,Code,Year)) %>% select(life_expectacy:matcher)
```{r}
life_expectacy_tidy<-life_expectacy  %>%filter(Year<= 2021 & Year>=2012) %>% rename(life_expectacy = "Life.expectancy.at.birth..historical.") %>% mutate(matcher=paste0(Entity,Code,Year)) %>% select(life_expectacy:matcher)
Population_research <- left_join(median_age_tidy, life_expectacy_tidy, by="matcher") %>% select(Entity, Year, median_age, life_expectacy)
Population_research
Population_research_1 <- aggregate(median_age~Entity, FUN  = mean,data= Population_research) %>% filter(Entity %in% G20) %>%
rename(region=Entity) %>% mutate(
region=recode(region, "United Kingdom"="UK","United States"="USA"))
Population_research_1
Graphic_1<- left_join(World_map,Population_research_1, by="region")
Graphic_1<- left_join(World_map,Population_research_1, by="region")
ggplot(Graphic_1, aes( x= long, y= lat, map_id = region))+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +theme(legend.position="bottom")+labs(title = "The median age distribution for G20 country")
continent<-c("Asia","Oceania","Africa","Northern America","Europe","Latin America and the Caribbean")
population_research2<- Population_research %>% filter( Entity %in% continent)
population_research2
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, color= Entity)) +geom_line(size=1.5)
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()
library(tidyverse)
set.seed(123)
df <- data.frame(x = rep(1:5, each = 3),
y = rnorm(15),
type = rep(c("A", "B", "C"), times = 5))
df
ggplot(df, aes(x = x, y = y, group = type, color = type)) +
geom_line()
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()
ggplot(df, aes(x = x, y = y,color = type)) + geom_line()
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line()+geom_point(color= "Black")+theme_light()
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line()+geom_point(color= "Black")+theme_light()
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line()+geom_point(color= "Black")+theme_light()+scale_shape_manual(values = (21,23))
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line()+geom_point(color= "Black")+theme_light()+scale_shape_manual(values = (21,23)
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line()+geom_point(color= "Black")+theme_light()+scale_shape_manual(values = (21,23)
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line()+geom_point(color= "Black")+theme_light()+scale_shape_manual(values = (21,23)
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line()+geom_point(color= "Black")+theme_light()+scale_shape_manual(values = c(21,23))
?scale_shape_manual
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line()+geom_point(color= "Black")+theme_light()+scale_shape_manual(values = c(1,1.5))
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()
?guides
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent"))
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",label = FALSE))
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",label = FALSE, nrow=2))
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",ncol=2))
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent", reverse = TRUE))
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent"))
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))
?labs
ggplot(Graphic_1, aes( x= long, y= lat, map_id = region))+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +theme(plot.title="The median age distribution for G20 country", plot.title.position="center", legend.position="bottom")
ggplot(Graphic_1, aes( x= long, y= lat, map_id = region))+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +theme(plot.title.position="plot", legend.position="bottom")
+labs(title = "The median age distribution for G20 country")
ggplot(Graphic_1, aes( x= long, y= lat, map_id = region))+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +theme(plot.title.position="plot", legend.position="bottom")
+labs(title = "The median age distribution for G20 country")
ggplot(Graphic_1, aes( x= long, y= lat, map_id = region))+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +theme( legend.position="bottom")
+labs(title = "The median age distribution for G20 country")
ggplot(Graphic_1, aes( x= long, y= lat, map_id = region))+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +theme_void() +theme( legend.position="bottom")+labs(title = "The median age distribution for G20 country")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs("The life expectancy between 2012 and 2021")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs("The life expectancy between 2012 and 2021")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +
annotate("text", x = max(population_research2$Year), y = tail(population_research2$life_expectancy, 1),
label = paste0("Last value: ", tail(population_research2$life_expectancy, 1)))
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +
annotate("text", x = max(population_research2$Year), y = tail(population_research2$life_expectancy, 1),
label = paste0("Last value: ", tail(population_research2$life_expectancy, 1)), vjust = -1)
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +
annotate("text", x = max(population_research2$Year), y = tail(population_research2$life_expectancy),
label = paste0("Last value: ", tail(population_research2$life_expectancy, 1)), vjust = -1)
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=79.4, label="79.4")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=80, label="79.4")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=c(80,78.1,76,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7))
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=c(80,78.1,76,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7),size=0.5)
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=c(80,78.1,76,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7),size=5)
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=c(80,78.1,76,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7),size=12)
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=c(80,78.1,76,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7),size=4)
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=c(80,78.1,76,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7),size=3)
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=c(80,78.1,76.5,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7),size=3)
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=c(80,78.1,76.5,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7),size=3,color="Blue")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=c(80,78.1,76.5,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7),size=3,color="Red")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=c(80,78.1,76.5,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7),size=3,color="gray")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=c(80,78.1,76.5,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7),size=3,color="gray31")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text"，x= 2021 y=c(80,78.1,76.5,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7),size=3,color="gray31")
population_research2 %>% ggplot(aes(x= Year, y= life_expectacy, group= Entity, color= Entity)) +geom_line(size=1.5)+geom_point(color= "Black")+theme_light()+guides(color = guide_legend(title = "Continent",reverse = TRUE))+labs(title= "The life expectancy between 2012 and 2021") +annotate("text",x= 2021, y=c(80,78.1,76.5,73,71.7,62.3), label=c(79.4,77.7,77.0,72.5,72.2,61.7),size=3,color="gray31")
?map_data
?fig.path
??fig.path
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, fig.align = "center",fig.path = "Figs/ ")
life_expectacy<-read.csv("Data/life-expectancy.csv",header = TRUE)
median_age<- read.csv("Data/median-age.csv", header = TRUE)
View(Population_research)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, fig.align = "center",fig.path = "Image/ ")
World_map<- map_data("world") %>% arrange(region)
library(tidyverse)
library(knitr)
library(maps)
World_map<- map_data("world") %>% arrange(region)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, fig.align = "center",fig.path = "Images/ ")
knitr::include_graphics("Image/Screenshot.png")
head(Population_research,2)
#Set up map  boundary
World_map<- map_data("world") %>% arrange(region)
#Measure the median age mean by Entity and data tidy
Population_research_1 <- aggregate(median_age~Entity, FUN  = mean,data= Population_research) %>%
rename(region=Entity) %>% mutate(region=recode(region, "United Kingdom"="UK","United States"="USA"))
#File combination for map boundary and Population research
Graphic_1<- left_join(World_map,Population_research_1, by="region")
#Geom_map plot
ggplot(Graphic_1, aes( x= long, y= lat, map_id = region))+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +
theme_void() +
theme( legend.position="bottom")+l
#data reading
life_expectacy<-read.csv("Data/life-expectancy.csv",header = TRUE)
median_age<- read.csv("Data/median-age.csv", header = TRUE)
# create the list of G20 countries
G20<-c("Australia","United States","Canada","Saudi Arabia","India","China","Russia","Germany", "Mexico","Brazil","Argentina","Italy", "France", "United Kingdom","Turkey", "South Africa","Japan","South Korea","Indonesia","Spain")
# Data tidy and narrow for median age and life_expectancy
median_age_tidy<-median_age %>%
filter(Year<= 2021 & Year>=2012,Entity %in% G20) %>%
rename(median_age= "Median.age...Sex..all...Age..all...Variant..estimates") %>% mutate(Entity=(str_remove_all(Entity, " \\(UN\\)")), matcher=paste0(Entity,Code,Year))
life_expectacy_tidy<-life_expectacy  %>%
filter(Year<= 2021 & Year>=2012,Entity %in% G20) %>%
rename(life_expectacy = "Life.expectancy.at.birth..historical.") %>% mutate(matcher=paste0(Entity,Code,Year)) %>%
select(life_expectacy:matcher)
# combine median age and life expectancy
Population_research <- left_join(median_age_tidy, life_expectacy_tidy, by="matcher") %>% select(Entity, Year, median_age, life_expectacy)
#save CSV
write.csv(Population_research,file="Data/Population_research.csv")
#data frame creation
Kable_names<-data.frame(Variable_name=names(Population_research), Explaination=c("The country name in G20 members","the year of research conducted","an index that can segement entire population equally ","a statistical measure of the average time of a person longevity per country "))
Kable_names %>% kable(caption = "The list of Variable names in Population_research")
knitr::include_graphics("Image/Screenshot.png")
head(Population_research,2)
kable(head(Population_research,2))
head(Population_research,2)
#Set up map  boundary
World_map<- map_data("world") %>% arrange(region)
#Measure the median age mean by Entity and data tidy
Population_research_1 <- aggregate(median_age~Entity, FUN  = mean,data= Population_research) %>%
rename(region=Entity) %>% mutate(region=recode(region, "United Kingdom"="UK","United States"="USA"))
#File combination for map boundary and Population research
Graphic_1<- left_join(World_map,Population_research_1, by="region")
#Geom_map plot
ggplot(Graphic_1, aes( x= long, y= lat, map_id = region))+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +
theme_void() +
theme( legend.position="bottom")+
labs(title = "The median age distribution for G20 country")
#Set up map  boundary
World_map<- map_data("world") %>% arrange(region)
#Measure the median age mean by Entity and data tidy
Population_research_1 <- aggregate(median_age~Entity, FUN  = mean,data= Population_research) %>%
rename(region=Entity) %>% mutate(region=recode(region, "United Kingdom"="UK","United States"="USA"))
#File combination for map boundary and Population research
Graphic_1<- left_join(World_map,Population_research_1, by="region")
#Geom_map plot
ggplot(Graphic_1, aes( x= long, y= lat, map_id = region))+
geom_map(aes(fill = median_age), map=World_map , color="black") +
scale_fill_gradient(low = "green", high = "red", na.value = "gray")  +
theme_void() +
theme( legend.position="bottom")+
labs(title = "The median age distribution for G20 country")
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, fig.align = "center",fig.path = "Image/ ")
knitr::include_graphics("Image/Screenshot.png")
knitr::opts_chunk$set(echo = FALSE,
message = FALSE,
warning = FALSE,
fig.align = "center",
fig.path = "Figures/")
ggplot(penguins, aes(flipper_length_mm,
fill = species)
) +
geom_histogram()
